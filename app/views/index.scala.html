@import helper._

@(userForm: Form[UserForm])(users: Seq[User])(usersActive: Seq[User])(usersDelete: Seq[User])(implicit messages: Messages)

@main("Welcome to Play") {
<h1>Welcome to Play!</h1>
<h2>This is my first MVC shot</h2>
@for(user <- users){
<h3>@user.name @user.age</h3>
}

<h2>SelecUserForRemove</h2>
<select id="SelecUserForRemove">
    <option>выберете элемент для удаления</option>
    @for(userActive <- usersActive){
    <option value=@userActive.id>@userActive.name.toString()</option>
    }
</select>

<h2>SelecUserForRestore</h2>
<select id="SelecUserForRestore">
    <option>выберете элемент для восстановления</option>
    @for(userDelete<- usersDelete){
    <option value=@userDelete.id>@userDelete.name.toString()</option>
    }
</select>


@form(action = routes.UserController.indexPOST()){
@inputText(userForm("name"))
@inputText(userForm("age"))

<button type="submit" name="action" value="add">Add element</button>
}

<button type="submit" id="remove" name="action" value="remove">Remove element</button>
<button type="submit" id="restore" name="action" value="restore">Restore element</button>
<button type="submit" id="edit" name="action" value="edit">Edit element</button>

<br>
<br>

<button onclick="myFunctionAll()">Show all elements</button>
<button onclick="myFunctionActive()">List active users</button>
<button onclick="myFunctionDelete()">List deleted users</button>
<br>
<br>
<br>
<button id="testButton">_____TEST BUTTON_______</button>

<script>
$(document).ready(function(){

    function myFunctionAll() {
        alert("@users.mkString("\\n")");
    }

    function myFunctionDelete() {
        alert("@usersDelete.mkString("\\n")");
    }

    function myFunctionActive() {
        alert("@usersActive.mkString("\\n")");
    }

// удаление
var currentID = $('#SelecUserForRemove').val();
console.log("currentID= "+currentID)

  $("#remove").click(function(){
    $.ajax({
    type: 'GET',
    url: "/remove_user/"+currentID,
    success: function (data) {
        window.location.replace('http://localhost:9000');
        console.log("remove success", "data=", data);
        },
    error: function () { alert("Не удалось удалить элемент") }
    });
  });

//работа с option для удаления элемента
  $('#SelecUserForRemove').change(function() {
    currentID = $(this).val();
	console.log(("currentID= "+currentID))
   });

//восстановление
   var currentID_restore = $('#SelecUserForRemove').val();
   console.log("currentID_restore= "+currentID_restore)

  $("#restore").click(function(){
    $.ajax({
    type: 'GET',
    url: "/restore_user/"+currentID_restore,
    success: function (data) {
        window.location.replace('http://localhost:9000');
        console.log("restore success", "data=", data);
        },
    error: function () { alert("Не удалось восстановить элемент") }
    });
  });

//работа с option для восстановления
  $('#SelecUserForRestore').change(function() {
    currentID_restore = $(this).val();
	console.log(("currentID_restore= "+currentID_restore))
   });

   $('#edit').click(function(){
       window.location.replace("/edit_user")
   });

});






</script>
}